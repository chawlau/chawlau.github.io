<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>  
	  
  	桥模式 -        凌云阁
  	
	</title>

  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="atom.xml" rel="alternate" title="       凌云阁" type="application/atom+xml">

	<link href="asset/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="asset/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<script src="asset/javascripts/jquery.min.js"></script>
	<script src="asset/highlightjs/highlight.pack.js"></script>
	<link href="asset/highlightjs/styles/solarized_dark.css" media="screen, projection" rel="stylesheet" type="text/css">
<script>hljs.initHighlightingOnLoad();</script>

	<!--[if lt IE 9]><script src="asset/javascripts/html5.js"></script><![endif]-->
	<!-- <link href='http://fonts.googleapis.com/css?family=Nunito:400,300,700' rel='stylesheet' type='text/css'> -->
	<style type="text/css">
/* latin */
@font-face {
  font-family: 'Nunito';
  font-style: normal;
  font-weight: 300;
  src: local('Nunito-Light'), url(asset/font/1TiHc9yag0wq3lDO9cw0voX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
}
/* latin */
@font-face {
  font-family: 'Nunito';
  font-style: normal;
  font-weight: 400;
  src: local('Nunito-Regular'), url(asset/font/6TbRXKWJjpj6V2v_WyRbMX-_kf6ByYO6CLYdB4HQE-Y.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
}
/* latin */
@font-face {
  font-family: 'Nunito';
  font-style: normal;
  font-weight: 700;
  src: local('Nunito-Bold'), url(asset/font/TttUCfJ272GBgSKaOaD7KoX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
}
	</style>
	
	<style type="text/css">
	.container .left-col{ opacity: 1;}
	#pagenavi a{ font-size: 1.3em;}
	#pagenavi .next:before{ top: 3px;}
	#pagenavi .prev:before{ top: 3px;}
	.container .mid-col .mid-col-container #content .archives .title{ font-size: 1.5em;}
	.container .mid-col .mid-col-container #content article{ padding: 15px 0px;}
	#header .subtitle {
		line-height: 1.2em;
		padding-top: 8px;
	}
	article pre{ background: none; border: none; padding: 0;}
	article .entry-content{text-align: left;}
	.share-comment{ padding: 25px 0px; clear: both;}
	hr{ margin: 20px 0px;border: 0; border-top:solid 1px #ddd;}

	</style>
  

</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
				<header id="header" class="inner">
				 
				 	<div class="profilepic">
						<img src="https://i.loli.net/2020/02/22/Si1K7sluept2ZgR.jpg" style="width:160px;">
					</div>
            	
					
					<h1><a href="index.html">       凌云阁</a></h1>
					<p class="subtitle">生命的意义是成为你自己！</p>
					<nav id="main-nav">
						<ul class="main">
						
						  <li id=""><a target="_self" href="index.html">Home</a></li>
						
						  <li id=""><a target="_self" href="archives.html">Archives</a></li>
						
						</ul>
					</nav>

					<nav id="sub-nav">
						<div class="social">

<a target="_blank" class="facebook" href="www.facebook.com" title="Facebook">Facebook</a>






<a target="_blank" class="weibo" href="www.weibo.com" title="weibo">Weibo</a>
<a target="_blank" class="twitter" target="_blank" href="www.twitter.com" title="Twitter">Twitter</a>
<a target="_blank" class="github" target="_blank" href="www.github.com/chawlau" title="GitHub">GitHub</a>


								

								<a class="rss" href="atom.xml" title="RSS">RSS</a>
							
						</div>
					</nav>
				</header>				
			</div>
		</div>	
		<div class="mid-col">
			<div class="mid-col-container"> <div id="content" class="inner">

	<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
		<h1 class="title" itemprop="name">桥模式</h1>
		<div class="entry-content" itemprop="articleBody">
			<h4><a id="%E5%8D%95%E4%B8%80%E8%81%8C%E8%B4%A3%E6%A8%A1%E5%BC%8F" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>单一职责模式</h4>
<ul>
<li>在软件组件的设计中，如果责任划分的不清晰，使用继承得到的结果往往是随着需求的变化，子类急剧膨胀，同时充斥着重复代码，这时侯的关键是划清责任</li>
</ul>
<h4><a id="%E5%8A%A8%E6%9C%BA" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>动机</h4>
<ul>
<li>只override了一部分</li>
<li>抽象部分（业务功能）与实现部分（平台实现）分离，使它们可以独立地变化。</li>
<li>由于某些类型的固有的实现逻辑，使得它们具有两个变化的维度乃至多个纬度的变化</li>
<li>如何应对这种“多维度的变化“？如何利用面向对象技术来使得类型</li>
<li>可以轻松地沿着两个乃至多个方向变化，而不引入额外的复杂度？</li>
</ul>
<h4><a id="%E7%BB%93%E6%9E%84" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>结构</h4>
<ul>
<li><img src="media/15728200383131/15728212883849.jpg" alt="" style="width:788px;" /></li>
</ul>
<h4><a id="%E8%A6%81%E7%82%B9%E6%80%BB%E7%BB%93" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>要点总结</h4>
<ul>
<li>Bridge 模式使用“对象间的组合关系”解耦了抽象和实现之间固有的绑定关系，使得抽象和实现可以沿着各自的维度来变化。所谓抽象和实现沿着各自纬度的变化，即“子类化“它们。</li>
<li>Bridge 模式有时候类似于多继承方案，但是多继承方案往往违背单职责原则（即一个类只有一个变化的原因），复用性比较差。Bridge 模式是比多继承方案更好的解决方法</li>
<li>Bridge 模式的应用一般在“两个非常强的变化维度”，有时一个类也有多于两个的变化维度，这时可以使用 Bridge 的扩展模式。</li>
</ul>
<h4><a id="cpp-demo" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>cpp_demo</h4>
<pre><code class="language-c++">class ISwitch
{
 public:
  ISwitch(IElectricalEquipment *ee) { m_pEe = ee; }
  virtual ~ISwitch() {}

  virtual void On() = 0;

  virtual void Off() = 0;

 protected:
  IElectricalEquipment *m_pEe;
};

class IElectricalEquipment
{
 public:
  virtual ~IElectricalEquipment() {}

  virtual void PowerOn() = 0;

  virtual void PowerOff() = 0;
};
class Light : public IElectricalEquipment
{
 public:
  // 开灯
  virtual void PowerOn() override {
    std::cout &lt;&lt; &quot;Light is on.&quot; &lt;&lt; std::endl;
  }

  // 关灯
  virtual void PowerOff() override {
    std::cout &lt;&lt; &quot;Light is off.&quot; &lt;&lt; std::endl;
  }
};

// 风扇
class Fan : public IElectricalEquipment
{
 public:
  // 打开风扇
  virtual void PowerOn() override {
    std::cout &lt;&lt; &quot;Fan is on.&quot; &lt;&lt; std::endl;
  }

  // 关闭风扇
  virtual void PowerOff() override {
    std::cout &lt;&lt; &quot;Fan is off.&quot; &lt;&lt; std::endl;
  }
};
// 拉链式开关
class PullChainSwitch : public ISwitch
{
public:
    PullChainSwitch(IElectricalEquipment *ee) : ISwitch(ee) {}

    // 用拉链式开关打开电器
    virtual void On() override {
        std::cout &lt;&lt; &quot;Switch on the equipment with a pull chain switch.&quot; &lt;&lt; std::endl;
        m_pEe-&gt;PowerOn();
    }

    // 用拉链式开关关闭电器
    virtual void Off() override {
        std::cout &lt;&lt; &quot;Switch off the equipment with a pull chain switch.&quot; &lt;&lt; std::endl;
        m_pEe-&gt;PowerOff();
    }
};
// 两位开关
class TwoPositionSwitch : public ISwitch
{
 public:
  TwoPositionSwitch(IElectricalEquipment *ee) : ISwitch(ee) {}

  // 用两位开关打开电器
  virtual void On() override {
    std::cout &lt;&lt; &quot;Switch on the equipment with a two-position switch.&quot; &lt;&lt; std::endl;
    m_pEe-&gt;PowerOn();
  }

  // 用两位开关关闭电器
  virtual void Off() override {
    std::cout &lt;&lt; &quot;Switch off the equipment with a two-position switch.&quot; &lt;&lt; std::endl;
    m_pEe-&gt;PowerOff();
  }
};
int main()
{
    // 创建电器 - 电灯、风扇
    IElectricalEquipment *light = new Light();
    IElectricalEquipment *fan = new Fan();

    /**
    * 创建开关 - 拉链式开关、两位开关
    * 将拉链式开关和电灯关联起来，将两位开关和风扇关联起来
    **/
    ISwitch *pullChain = new PullChainSwitch(light);
    ISwitch *twoPosition = new TwoPositionSwitch(fan);

    // 开灯、关灯
    pullChain-&gt;On();
    pullChain-&gt;Off();

    // 打开风扇、关闭风扇
    twoPosition-&gt;On();
    twoPosition-&gt;Off();
}
</code></pre>
<h4><a id="golang-demo" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>golang_demo</h4>
<pre><code class="language-go">package design_pattern

import (
	&quot;fmt&quot;
	&quot;reflect&quot;
)

type ISwitch interface {
	On()
	Off()
}

type IEquip interface {
	PowerOn()
	PowerOff()
}

type Light struct {}

func (l *Light) PowerOn() {
	fmt.Println(reflect.TypeOf(l).String() + &quot; PowerOn&quot;)
}

func (l *Light) PowerOff() {
	fmt.Println(reflect.TypeOf(l).String() + &quot; PowerOff&quot;)
}

type Fen struct {}

func (l *Fen) PowerOn() {
	fmt.Println(reflect.TypeOf(l).String() + &quot; PowerOn&quot;)
}

func (l *Fen) PowerOff() {
	fmt.Println(reflect.TypeOf(l).String() + &quot; PowerOff&quot;)
}

type PullSwitch struct {
	IEquip
}

func NewPullSwitch(i IEquip) ISwitch {
	return &amp;PullSwitch{
		IEquip: i,
	}
}

func (p *PullSwitch) On() {
	p.IEquip.PowerOn()
}

func (p *PullSwitch) Off() {
	p.IEquip.PowerOff()
}

type TwoBiteSwitch struct {
	IEquip
}

func NewTwoBiteSwitch(i IEquip) ISwitch {
	return &amp;TwoBiteSwitch{
		IEquip: i,
	}
}

func (p *TwoBiteSwitch) On() {
	p.IEquip.PowerOn()
}

func (p *TwoBiteSwitch) Off() {
	p.IEquip.PowerOff()
}

type Message interface {
	SendMsg()
}

type AsyncMsg struct {
	ConcreteMsg
}

func NewAsyncMsg(c ConcreteMsg) *AsyncMsg {
	return &amp;AsyncMsg{
		ConcreteMsg: c,
	}
}

func (a *AsyncMsg) SendMsg() {
	a.ConcreteMsg.Send()
}

type SyncMsg struct {
	ConcreteMsg
}

func NewSyncMsg(c ConcreteMsg) *SyncMsg {
	return &amp;SyncMsg{
		ConcreteMsg: c,
	}
}

func (a *SyncMsg) SendMsg() {
	a.ConcreteMsg.Send()
}

type ConcreteMsg interface {
	Send()
}

type Email struct {
}

func (e *Email) Send() {
	fmt.Println(reflect.TypeOf(e).String() + &quot; Send&quot;)
}

type WeChat struct {
}

func (w *WeChat) Send() {
	fmt.Println(reflect.TypeOf(w).String() + &quot; Send&quot;)
}

func TestBridge(t *testing.T) {
	ab := NewAbstraction()

	imA := NewConcreteImA()
	ab.SetImplement(imA)
	ab.Operation()

	imB := NewConcreteImB()
	ab.SetImplement(imB)
	ab.Operation()
}

func TestPullSwitch_On(t *testing.T) {
	light := &amp;Light{}
	fen := &amp;Fen{}

	pull:= NewPullSwitch(light)
	pull.On()
	pull.Off()

	two := NewTwoBiteSwitch(fen)
	two.On()
	two.Off()
}

func TestMsg(t *testing.T) {
	email := &amp;Email{}
	weChat := &amp;WeChat{}

	async := NewAsyncMsg(email)
	async.SendMsg()

	sync := NewSyncMsg(weChat)
	sync.SendMsg()
}
</code></pre>

		</div>
	</article>
	<div class="share-comment">
	 

	  

	  

	</div>
</div>        </div>
			<footer id="footer" class="inner">Copyright &copy; 2014
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a> &nbsp;&nbsp; 
Theme by <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a>
      </footer>
		</div>
	</div>

  
    



</body>
</html>